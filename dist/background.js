(()=>{let e="";chrome.runtime.onMessage.addListener(((t,o,c)=>("updateSelectedText"===t.action?e=t.text:"getSelectedText"===t.action&&c({selectedText:e}),!0))),chrome.commands.onCommand.addListener((t=>{"_execute_action"===t&&chrome.tabs.query({active:!0,currentWindow:!0},(t=>{chrome.tabs.sendMessage(t[0].id,{action:"getSelectedText"},(t=>{chrome.runtime.lastError?console.error(chrome.runtime.lastError):t&&t.selectedText&&(e=t.selectedText,chrome.action.openPopup())}))}))})),chrome.runtime.onInstalled.addListener((()=>{chrome.storage.sync.get(["customShortcut"],(e=>{e.customShortcut&&chrome.commands.update({name:"_execute_action",shortcut:e.customShortcut})}))}))})();